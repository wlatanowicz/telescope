services:

  camera-local:
    class: wlatanowicz\AppBundle\Hardware\Local\Camera
    arguments:
      - '@sys-process'
      - '@sys-filesystem'
      - '@factory-sony-exposure-time'
      - 'umask 0000 && sudo /usr/local/bin/gphoto2'
      - '/tmp'
      - '@logger'
    tags:
      - { name: logger.metadata, color: green, display: 'Sony Camera' }

  camera-local-mac:
    class: wlatanowicz\AppBundle\Hardware\Local\Camera
    arguments:
      - '@sys-process'
      - '@sys-filesystem'
      - '@factory-sony-exposure-time'
      - 'umask 0000 && /opt/local/bin/gphoto2'
      - '/tmp'
      - '@logger'
    tags:
      - { name: logger.metadata, color: green, display: 'Sony Camera' }

  camera-remote:
    class: wlatanowicz\AppBundle\Hardware\Remote\Camera
    arguments:
      - '@camera-remote-client'
      - '@jms_serializer'
      - '@logger'
    tags:
      - { name: logger.metadata, color: green, display: 'Remote Camera' }

  camera-remote-client:
    class: GuzzleHttp\Client
    arguments:
      -
        base_uri: 'http://192.168.0.50/index.php/hardware/camera/sony/'

  camera-remote-mac:
    class: wlatanowicz\AppBundle\Hardware\Remote\Camera
    arguments:
      - '@camera-remote-mac-client'
      - '@jms_serializer'
      - '@logger'
    tags:
      - { name: logger.metadata, color: green, display: 'Remote Camera' }

  camera-remote-mac-client:
    class: GuzzleHttp\Client
    arguments:
      -
        base_uri: 'http://localhost/index.php/hardware/camera/sony-mac/'

  camera-sim:
    class: wlatanowicz\AppBundle\Hardware\Simulator\Camera
    arguments:
      - '@focuser-sim'
      - '@sys-filesystem'
      - '@factory-imagick-image'
      - 'star.jpg'
      - '@logger'
    tags:
      - { name: logger.metadata, color: green, display: 'Camera Simulator' }

  camera-sim-fast:
    class: wlatanowicz\AppBundle\Hardware\Simulator\SimpleCamera
    arguments:
      - '@sys-filesystem'
      - '@factory-imagick-image'
      - 'star.jpg'
      - '@logger'
    tags:
      - { name: logger.metadata, color: green, display: 'Camera Simulator' }


  camera-provider:
    class: wlatanowicz\AppBundle\Hardware\Provider\CameraProvider
    arguments:
      -
        local: '@camera-local'
        sony: '@camera-local'
        sony-mac: '@camera-local-mac'
        remote: '@camera-remote'
        remote-mac: '@camera-remote-mac'
        sim: '@camera-sim'
        sim-fast: '@camera-sim-fast'
      - "%default_camera%"
